
<div class="block" id="c-report-clients-abc">

    <h1>[`Clients`]</h1>

    <div class="flexbox">
        <form action="">

            <div class="fields">
                <div class="fields-group custom-mb-16">
                    <div class="field">
                        <div class="name for-input large">
                            [`Currency`]
                        </div>
                        <div class="value">

                            <div class="wa-select solid">
                                <select name="currency">
                                    {foreach $currencies as $cur}
                                        <option value="{$cur->getCode()}"
                                        {if $cur->getCode() == $currency->getCode()} selected{/if}>{$cur->getTitle()|escape}</option>
                                    {/foreach}
                                </select>
                            </div>

                        </div>
                    </div>

                    <div class="field">
                        <div class="name for-input">
                            [`Group`]
                        </div>
                        <div class="value">
                            <div class="flexbox space-16">
                                <div>
                                    <strong>A</strong>
                                    <input type="text" name="a" value="{$a}" class="shortest number solid">%
                                </div>
                                <div>
                                    <strong>B</strong>
                                    <input type="text" name="b" value="{$b}" class="shortest number solid">%
                                </div>
                                <div>
                                    <strong>C</strong>
                                    <input type="text" name="c" value="{$c}" class="shortest number solid">%
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="field" style="min-height: 34px;">
                        <div class="name for-input">
                            [`Period`]
                        </div>
                        <div class="value">
                            {include file='../includes/DateRange.html' from=$from to=$to withButton=false}
                        </div>
                    </div>

                </div>
                <input type="submit" class="button" value="[`ShowButton`]">
            </div>

        </form>
    </div>

    <br>

    <div class="c-report-dds-inner">
        <table>
            <tr>
                <th>[`Contractor`]</th>
                <th class="align-right">[`Revenue`], {$currency->getSign()}</th>
                <th class="align-right">[`% of revenue`]</th>
            </tr>
        {foreach $tableData as $letter}
            <tr class="bordered-bottom">
                <td class="bold">{$letter->letter}</td>
                <td class="bold align-right">{$letter->value->amount}</td>
                <td class="bold align-right">{$letter->value->percent}%</td>
            </tr>
            {foreach $letter->clients as $client}
                <tr>
                    <td>
                        <div class="flexbox middle space-12">
                            <i class="userpic userpic-48" style="background-image: url({$client->img})"></i>
                            <span>{$client->name|escape}</span>
                        </div>
                    </td>
                    <td class="align-right" style="vertical-align: middle !important;">{$client->value->amount}</td>
                    <td class="align-right" style="vertical-align: middle !important;">{$client->value->percent}%</td>
                </tr>
            {/foreach}
        {/foreach}
        </table>
    </div>
</div>

<script>
    (function(){ "use strict";
        var $w = $('#c-report-clients-abc');

        $w.on('submit', 'form', function (e) {

            var pathname = window.location.pathname.split('clients-abc');
            var params = $(this).serialize();

            window.location = pathname[0] + 'clients-abc/' + params;

            return false;
        });
    })();
</script>
